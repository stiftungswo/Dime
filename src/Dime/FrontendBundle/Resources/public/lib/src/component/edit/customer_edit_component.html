<loading-container *ngIf="entity == null"></loading-container>
<div *ngIf="entity != null">
<form class="box-body" #editform="ngForm">
  <dime-box label="Kunde bearbeiten">
    <div boxBody class="form-horizontal" *ngIf="entity != null">
      <dime-form-group horizontal label="Beschreibung">
        <input required ngControl="name" class="form-control"
               [(ngModel)]="entity.name" (change)="addSaveField('name')">
      </dime-form-group>
      <dime-form-group horizontal label="Firma">
        <input class="form-control" [(ngModel)]="entity.company" (change)="addSaveField('company')">
      </dime-form-group>
      <dime-form-group horizontal label="Abteilung">
        <input class="form-control" [(ngModel)]="entity.department" (change)="addSaveField('department')">
      </dime-form-group>
      <dime-form-group horizontal label="Anrede">
        <input required ngControl="salutation" class="form-control"
               [(ngModel)]="entity.salutation" (change)="addSaveField('salutation')">
      </dime-form-group>
      <dime-form-group horizontal label="E-Mail">
        <input ngControl="email" class="form-control" [(ngModel)]="entity.email" (change)="addSaveField('email')">
      </dime-form-group>
      <dime-form-group horizontal label="Telefonnummer">
        <input ngControl="phone" class="form-control" [(ngModel)]="entity.phone" (change)="addSaveField('phone')">
      </dime-form-group>
      <dime-form-group horizontal label="Mobiltelefonnummer">
        <input ngControl="mobilephone" class="form-control" [(ngModel)]="entity.mobilephone" (change)="addSaveField('mobilephone')">
      </dime-form-group>
      <dime-form-group horizontal label="Kommentar">
        <textarea ngControl="comment" class="form-control" [(ngModel)]="entity.comment" (change)="addSaveField('comment')"></textarea>
      </dime-form-group>
      <dime-form-group horizontal label="Ansprechperson">
        <input required ngControl="fullname"
               class="form-control" [(ngModel)]="entity.fullname" (change)="addSaveField('fullname')">
      </dime-form-group>
      <dime-form-group horizontal label="Tarif Gruppe">
        <rate-group-select required ngControl="rateGroup"
                          [ngModel]="entity.rateGroup" (ngModelChange)="entity.rateGroup=$event;addSaveField('rateGroup')"></rate-group-select>
      </dime-form-group>
      <dime-form-group horizontal class="checkbox">
          <label>
            <input type="checkbox" [(ngModel)]="entity.chargeable" (change)="addSaveField('chargeable')"/>
            Verrechenbar
          </label>
      </dime-form-group>
      <dime-form-group horizontal class="checkbox">
          <label>
            <input type="checkbox" [(ngModel)]="entity.systemCustomer" (change)="addSaveField('systemCustomer')"/>
            System Kunde
          </label>
      </dime-form-group>
      <dime-form-group horizontal label="Tags">
        <tag-select [ngModel]="entity.tags" (ngModelChange)="entity.tags=$event;addSaveField('tags')"></tag-select>
      </dime-form-group>
      <h4>Adresse</h4>
      <address-edit [(address)]="entity.address"  (change)="addSaveField('address')"></address-edit>
    </div>
    <div boxFooter class="DimeControlButtons">
      <save-button [valid]="editform.valid" (click)="saveEntity()"></save-button>
      <dime-button (click)="reloadEvict()" glyphicon="refresh"></dime-button>
    </div>
  </dime-box>
</form>
<edit-footer [entity]="entity"></edit-footer>
</div>
