<loading-container *ngIf="entity == null"></loading-container>
<div *ngIf="entity != null">
    <form #editform="ngForm">
        <dime-box label="Firmenkunde bearbeiten">
            <div boxBody class="form-horizontal">
                <dime-form-group horizontal label="Name">
                    <input required ngControl="name" class="form-control" [(ngModel)]="entity.name"
                           (change)="addSaveField('name')">
                </dime-form-group>

                <dime-form-group horizontal label="E-Mail">
                    <input ngControl="email" class="form-control" [(ngModel)]="entity.email"
                           (change)="addSaveField('email')">
                </dime-form-group>

                <dime-form-group horizontal label="Tarif">
                    <rate-group-select required ngControl="rateGroup"
                                       [ngModel]="entity.rateGroup"
                                       (ngModelChange)="entity.rateGroup=$event;addSaveField('rateGroup')"></rate-group-select>
                </dime-form-group>

                <dime-form-group horizontal label="Kommentar">
                    <textarea ngControl="comment" class="form-control" [(ngModel)]="entity.comment"
                              (change)="addSaveField('comment')"></textarea>
                </dime-form-group>

                <dime-form-group horizontal label="Tags">
                    <tag-select [ngModel]="entity.tags" (ngModelChange)="entity.tags=$event;addSaveField('tags')"></tag-select>
                </dime-form-group>

                <dime-form-group horizontal class="checkbox" help="Aktiviere diese Checkbox, wenn du möchtest, dass Projekte für diesen Kunden standardmässig verrechnet werden sollen. Du kannst dies aber pro Projekt nochmals individuell anpassen.">
                    <label>
                        <input required type="checkbox" [(ngModel)]="entity.chargeable" (change)="addSaveField('chargeable')"> Verrechenbar?
                    </label>
                </dime-form-group>

                <dime-form-group horizontal class="checkbox" help="Aktiviere diese Checkbox, wenn du möchtest, dass dieser Kunde bei der Erstellung von neuen Offerten oder Projekten nicht angezeigt werden soll. Auf den Addressexport hat dies keinen Einfluss.">
                    <label>
                        <input required type="checkbox" [(ngModel)]="entity.hideForBusiness" (change)="addSaveField('hideForBusiness')"> Nicht anzeigen in Dime?
                    </label>
                </dime-form-group>
            </div>
        </dime-box>

        <address-overview [customer]="entity.id"></address-overview>
        <phone-overview [customer]="entity.id"></phone-overview>
        <company-person-overview [company]="entity.id"></company-person-overview>

        <div class="DimeControlButtons">
            <save-button [valid]="editform.valid" (click)="saveEntity()"></save-button>
            <dime-button (click)="reloadEvict()" glyphicon="refresh"></dime-button>
        </div>
    </form>
    <edit-footer [entity]="entity"></edit-footer>
</div>
