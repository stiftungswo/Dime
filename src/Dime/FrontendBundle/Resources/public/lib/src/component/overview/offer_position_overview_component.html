<dime-box label="Services">
  <div boxBody ngControlGroup="offerpositions" #overview="ngForm">
    <table class="table table-bordered table-hover" >
      <thead>
        <tr>
          <th>Reihenfolge</th>
          <th class="col-sm-4">Service
            <help-tooltip text="Wenn dein Service nicht aufgelistet ist, ist er entweder archiviert oder nicht für den Tarif der Offerte konfiguriert."></help-tooltip>
          </th>
          <th>Tarif</th>
          <th>Tarif Einheit</th>
          <th>Einheits-Typ</th>
          <th>Menge</th>
          <th>MwSt.</th>
          <th>Total</th>
          <th width="60">Aktion</th>
        </tr>
      </thead>
      <tbody *ngIf="entities != null" >
        <tr
          *ngFor="let c of controls | orderBy:'order'"
          (click)="selectEntity(c.controls['id'].value)"
          [ngClass]="rowClass(c.controls['id'].value, c.valid)"
          >
          <td validationStatus class="form-group">
            <input class="form-control" type="number"
                   [ngFormControl]="c.controls['order']" /></td>
          <td validationStatus class="form-group">
            <service-select required hideArchived [options]="availableServices" [disabled]="offer?.rateGroup == null"
                            [ngFormControl]="c.controls['service']" ></service-select></td>
          <td validationStatus class="form-group">
            <input required class="form-control"
                   [ngFormControl]="c.controls['rateValue']" /></td>
          <td validationStatus class="form-group">
            <input required class="form-control"
                   [ngFormControl]="c.controls['rateUnit']" /></td>
          <td validationStatus class="form-group">
            <rate-unit-type-select required
                                 [ngFormControl]="c.controls['rateUnitType']" ></rate-unit-type-select></td>
          <td validationStatus class="form-group">
            <input required class="form-control" type="number"
                   [ngFormControl]="c.controls['amount']" /></td>
          <td validationStatus class="form-group">
            <percentage-input required
                              [ngFormControl]="c.controls['vat']"></percentage-input></td>
          <td>{{c.controls['total'].value}}</td>
          <td><dime-button (click)="deleteEntity(c.controls['id'].value)" fontAwesome="trash-o" color="red"></dime-button></td>
        </tr>
      </tbody>
    </table>
  </div>
  <div boxFooter class="DimeControlButtons">
    <dime-button primary (click)="createEntity()" glyphicon="plus">Hinzufügen</dime-button>
    <dime-button primary (click)="duplicateEntity()" fontAwesome="copy">Duplizieren</dime-button>
    <dime-button (click)="reloadEvict()" glyphicon="refresh"></dime-button>
  </div>
</dime-box>

