<div class="row" style="display: table;margin: 0 auto;margin-bottom: 5px;">
    <daterange startdate="filterStartDate" enddate="filterEndDate" null-allowed="true"></daterange>
</div>
<table class="table table-bordered table-hover form">
    <thead>
    <tr>
        <th ng-if="projectBased">Benutzer</th>
        <th class="col-sm-6">Service</th>
        <th ng-if="blendOutStartAndEnd">Datum</th>
        <th ng-if="blendOutStartAndEnd == false">Start</th>
        <th ng-if="blendOutStartAndEnd == false">Ende</th>
        <th>Dauer/Anzahl</th>
        <th width="60">Aktion</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="entity in entities | timeslicedatefilter: filterStartDate:filterEndDate | orderBy:'startedAt'" ng-click="selectEntity(entity.id)" ng-class="isSelected(entity)? 'info': ''">
        <td ng-if="projectBased"><user-select user="entity.employee" callback="entity.addFieldtoUpdate(name)" field="'employee'"></user-select></td>
        <td><activity-select activity="entity.activity" project="entity.project.id" callback="entity.addFieldtoUpdate(name)" field="'activity'"></activity-select></td>
        <td ng-if="blendOutStartAndEnd"><dateinput style="width: 100%;" format="'dd-MM-y'" date="entity.startedAt"></dateinput></td>
        <td ng-if="blendOutStartAndEnd == false"><dateinput style="width: 100%;" format="'dd-MM-y HH:mm'" date="entity.startedAt" field="'startedAt'" callback="entity.addFieldtoUpdate(name)"></dateinput></td>
        <td ng-if="blendOutStartAndEnd == false"><dateinput style="width: 100%;" format="'dd-MM-y HH:mm'" date="entity.stoppedAt" field="'stoppedAt'" callback="entity.addFieldtoUpdate(name)"></dateinput></td>
        <td><input style="width: 100%;" class="form-control" ng-model="entity.value" ng-change="addSaveField('value', entity)"/></td>
        <td><button type="button" class="btn btn-default" ng-click="deleteEntity(entity.id)"><i class="fa fa-fw fa-trash-o" style="color:red"></i></button></td>
    </tr>
    </tbody>
</table>
<div class="DimeControlButtons container-inline">
    <div class="row form-inline">
        <div class="col-md-2">
            <label>Datum</label>
            <dateinput date="newEntryDate" has-buttons="true"></dateinput>
        </div>
        <div class="col-md-1">
            <label>Berechnen</label>
            <input class="checkbox" type="checkbox" ng-model="updateNewEntryDate" />
        </div>
        <div ng-if="projectBased == true" class="col-md-2">
            <label>Benutzer</label>
            <user-select clearOnClose="false" user="employee" useContext="false"></user-select>
        </div>
        <div ng-if="projectBased == false" class="col-md-2">
            <label>Benutzer</label>
            <user-select clearOnClose="false" user="employee" useContext="true"></user-select>
        </div>
        <div ng-if="allowProjectSelect" class="col-md-4">
            <label>Projekt</label>
            <project-select project="selectedProject"></project-select>
        </div>
        <div class="col-md-2">
            <label>Aktivität</label>
            <activity-select activity="selectedActivity" project="selectedProject.id" field="'activity'" shortname="true"></activity-select>
        </div>
        <div class="col-md-1">
            <label>Wert</label>
            <setting-edit namespace="'/usr/defaults/timeslice'" name="'value'" defaultvalue="'8.4h'"></setting-edit>
        </div>
        <div class="col-md-12" style="margin-top: 5px;">
            <button type="button" class="btn btn-primary" ng-click="createEntity()">Eintrag hinzufügen</button>
            <button type="button" class="btn btn-default" ng-click="duplicateEntity()">Duplizieren</button>
            <button type="button" class="btn btn-default" ng-click="reload(evict: true)"><span class="glyphicon glyphicon-refresh"></span></button>
        </div>
    </div>
</div>