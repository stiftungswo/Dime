<div class="col-md-12">
  <div class="box box-primary">
    <div class="box-header with-border">
      <h3 class="box-title">Offerte bearbeiten</h3>
    </div>
    <div class="box-body" ng-form name="editform">
      <div class="">
        <div class="form-horizontal">
          <div class="form-group">
            <label class="col-sm-2 control-label">Name</label>
            <div class="col-sm-4">
              <input required="true" class="form-control" style="width: 100%;" type="text" ng-model="entity.name" ng-change="addSaveField('name')">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">Kunde</label>
            <customer-select required="true" class="col-sm-4" customer="entity.customer" callback="entity.addFieldtoUpdate(name)" field="'customer'"></customer-select>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">Status</label>
            <offerstatus-select class="col-sm-4" status="entity.status" callback="entity.addFieldtoUpdate(name)" field="'status'"></offerstatus-select>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">Verantwortlicher Mitarbeiter</label>
            <user-select class="col-sm-4" user="entity.accountant" callback="addSaveField(name)" field="'accountant'"></user-select>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">Gültig bis</label>
            <dateinput class="col-sm-4" date="entity.validTo" field="'validTo'" callback="addSaveField(name)"></dateinput>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">Tarif</label>
            <rategroup-select class="col-sm-4" rategroup="entity.rateGroup" callback="addSaveField(name)" field="'rateGroup'"></rategroup-select>
          </div>
          <h4>Addresse</h4>
          <address-edit address="entity.address" ng-change="addSaveField('address')"></address-edit>
          <div class="form-horizontal">
            <div class="form-group">
              <label class="col-sm-2"></label>
              <div class="col-sm-4">
                <a ng-click="copyAddressFromCustomer()" ng-show="entity.customer != null">Adresse aus Kunde übernehmen</a>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="control-label">Kurzbeschreibung</label>
          <textarea class="form-control" ng-model="entity.shortDescription" ng-change="addSaveField('shortDescription')"></textarea>
        </div>
        <div class="form-group">
          <label class="control-label">Beschreibung</label>
          <textarea class="form-control" ng-model="entity.description" ng-change="addSaveField('description')"></textarea>
        </div>
      </div>
    </div>
  </div>
</div>
<offerposition-overview offer="entity.id"></offerposition-overview>
<div class="row">
  <div class="col-md-6 left"><standarddiscount-overview discounts="entity.standardDiscounts" callback="addSaveField(name)"></standarddiscount-overview></div>
  <div class="col-md-6 right"><offerdiscount-overview offer="entity.id"></offerdiscount-overview></div>
</div>
<div class="col-md-12">
  <div class="box box-primary">
    <div class="box-header with-border">
      <h3 class="box-title">Berechnung</h3>
    </div>
    <div class="box-body">
      <div class="row"><label class="col-sm-2 col-xs-6 control-label">Subtotal</label><div class="col-sm-4 col-xs-6">{{entity.subtotal}}</div></div>
      <div class="row"><label class="col-sm-2 col-xs-6 control-label">Davon Mwst.</label><div class="col-sm-4 col-xs-6">{{entity.totalVAT}}</div></div>
      <div class="row"><label class="col-sm-2 col-xs-6 control-label">Total Abzüge</label><div class="col-sm-4 col-xs-6">{{entity.totalDiscounts}}</div></div>
      <div class="row"><label class="col-sm-2 col-xs-6 control-label">Total</label><div class="col-sm-4 col-xs-6">{{entity.total}}</div></div>
      <div class="row">
        <label class="col-sm-2 control-label">Fixpreis</label>
        <div class="col-sm-4">
          <input class="form-control" type="text" ng-model="entity.fixedPrice" ng-change="addSaveField('fixedPrice')">
        </div>
      </div>
    </div>
  </div>
</div>
<div class="col-md-12">
  <div class="DimeControlButtons">
    <button type="button" class="btn btn-primary" ng-click="saveEntity()"><error-icon></error-icon></button>
    <button type="button" class="btn btn-primary" ng-click="printOffer()"><span class="glyphicon glyphicon-print"></span> Drucken</button>
    <button type="button" class="btn btn-primary" ng-click="openProject()">Projekt erstellen</button>
    <button type="button" class="btn btn-default" ng-click="reload(evict: true)"><span class="glyphicon glyphicon-refresh"></span></button>
  </div>
</div>