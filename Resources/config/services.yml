parameters:
    generic_handler: "Dime\EmployeeBundle\Handler\GenericHandler"

services:
    dime.employee.handler:
        class: "Dime\TimetrackerBundle\Handler\UserHandler"
        arguments: [ "@doctrine.orm.entity_manager", "Dime\EmployeeBundle\Entity\Employee", "@service_container", "@fos_user.user_manager", "em", "dime_employeeBundle_employeeformtype" ]

    dime.period.handler:
        class: %generic_handler%
        arguments: [ "@doctrine.orm.entity_manager", "Dime\EmployeeBundle\Entity\\Period",  "@service_container", "p", "dime_employeebundle_periodformtype"]

    dime.holiday.handler:
        class: %generic_handler%
        arguments: [ "@doctrine.orm.entity_manager", "Dime\EmployeeBundle\Entity\Holiday",  "@service_container", "h", "dime_employeebundle_holidayformtype"]

    dime.persist.event.timeslice:
         class: Dime\EmployeeBundle\EventListener\TimeslicePersistSubscriber
         calls:
            - [ setContainer,  [@service_container] ]
         tags:
            - { name: kernel.event_subscriber }

    dime.persist.event.period:
         class: Dime\EmployeeBundle\EventListener\PeriodPersistSubscriber
         calls:
            - [ setContainer,  [@service_container] ]
         tags:
            - { name: kernel.event_subscriber }
    dime.persist.event.holiday:
         class: Dime\EmployeeBundle\EventListener\HolidayPersistSubscriber
         calls:
            - [ setContainer,  [@service_container] ]
         tags:
            - { name: kernel.event_subscriber }